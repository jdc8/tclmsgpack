Intro
=====

msgpack is a wrapper for the MessagePack library (http://msgpack.org/). The
wrapper is based on version 0.5.7 of the MessagePack library. It is written
using critcl 3. You can find the wrapper code at GitHub:

    https://github.com/jdc8/tclmsgpack

License
=======

While MessagePack itself uses the Apache License version 2.0, this wrapper uses
the BSD license. Check COPYING.BSD for more info.

Building
========

Requirements:

- MessagePack 0.5.7 from https://github.com/msgpack/msgpack

- Tcl 8.5 or 8.6

- Critcl 3

To build the wrapper, run the build.tcl script. The script searches for critcl
and zeromq installation or sources.  Type "tclsh build.tcl --help" for more
information. On Linux, the package can be linked against MessagePack statically
or dynamicallly. Default is dynamic. Use the -static option to choose static
linking.

Usage
=====

Loading
-------

    package require msgpack

Packing
-------

    msgpack packer ?<name>?

        Creates a packer and a packer object command with the specified name (or
        msgpack<id> is no name is specified)

        <name> data

        <name> destroy

        <name> pack <type>

            Supported types are:

	        nil
	        true
	        false

        <name> pack <type> <data>

            Supported types are:

    	        short
	        int
	        long
	        long_long
	        unsigned_short
	        unsigned_int
	        unsigned_long
	        unsigned_long_long
	        float
	        double
	        boolean
	        string
		raw_body

        <name> pack <type> <size>

            Supported types are:

	        array
		map
		raw

        <name> pack list <element_type> <data>

        <name> pack dict <key_type> <value_type> <data>

        <name> pack tclarray <key_type> <value_type> <array_name>

        <name> reset

Unpacking
---------

    msgpack unpack <data>

Utilities
---------

    msgpack version

    msgpack map2dict <unpacked_map_data>

    msgpack map2array <unpacked_map_data> <array_name>

    msgpack array2list <unpacked_array_data>
